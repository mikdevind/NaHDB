const a0_0x3dd628=a0_0x4ea0;(function(_0x31b954,_0x2c7daf){const _0x8f2d16=a0_0x4ea0,_0xafc19d=_0x31b954();while(!![]){try{const _0x5363ae=parseInt(_0x8f2d16(0x9d))/0x1*(parseInt(_0x8f2d16(0x94))/0x2)+parseInt(_0x8f2d16(0xdf))/0x3*(parseInt(_0x8f2d16(0xfb))/0x4)+parseInt(_0x8f2d16(0x86))/0x5+-parseInt(_0x8f2d16(0x8b))/0x6+-parseInt(_0x8f2d16(0x85))/0x7+-parseInt(_0x8f2d16(0x91))/0x8+-parseInt(_0x8f2d16(0xa5))/0x9;if(_0x5363ae===_0x2c7daf)break;else _0xafc19d['push'](_0xafc19d['shift']());}catch(_0x2f0e03){_0xafc19d['push'](_0xafc19d['shift']());}}}(a0_0xae44,0x6c3d0));import a0_0x4cffcc from'fs';import a0_0x42f4b6 from'path';import a0_0x574394 from'crypto';const BLOCK_SIZE=0x10;function a0_0x4ea0(_0x338da1,_0x5c9e70){const _0xae4416=a0_0xae44();return a0_0x4ea0=function(_0x4ea01a,_0x3ef234){_0x4ea01a=_0x4ea01a-0x74;let _0xa77a81=_0xae4416[_0x4ea01a];return _0xa77a81;},a0_0x4ea0(_0x338da1,_0x5c9e70);}function a0_0xae44(){const _0x1f7679=['_hashPassword','_getTimestamp','folder','deleteTable','createDecipheriv','getSeconds','password','permissions','update','update_table','map','_stringToBinary','createTable','delete','updateUsername','getMinutes','ğŸš«\x20Username\x20\x27','_generateCustomId','dict','get_schema','\x20bytes','_binaryToString','ğŸš«\x20Tidak\x20boleh\x20menggunakan\x20username\x20\x27root\x27.','_decryptV2','getUsernameById','forgert_password','Encryption\x20failed:\x20result\x20is\x20empty','Ciphertext\x20too\x20short:\x20','stringify','slice','updated_at','_readFile','concat','writeFile','ğŸš«\x20Hanya\x20root\x20yang\x20diizinkan\x20menambah\x20user.','33Suaeis','ğŸ”’\x20Harus\x20login\x20terlebih\x20dahulu.','\x27\x20telah\x20dikosongkan.','create_table','_unpad','base64','get_username_by_id','ğŸ—‘ï¸\x20Tabel\x20\x27','Schema\x20untuk\x20tabel\x20\x27','\x27\x20berhasil\x20direset.','Tabel\x20\x27','âœ…\x20Struktur\x20tabel\x20\x27','_pad','root','_metaPath','randomBytes','existsSync','.db','joinField','aes-256-cbc','str','_readSchema','_timestamp','some','âš ï¸\x20Tabel\x20\x27','_xorBytes','unlink','replace','208732RzPnYB','\x27\x20tidak\x20valid\x20di\x20tabel\x20\x27','updateTable','getDate','getSchema','get_user_id_by_username','where','isLogin','iAKMJcvgHKHUjd8nZJTSQMUBWTHadmSANQQmEbv8ipzX','toString','ğŸš«\x20Anda\x20tidak\x20memiliki\x20izin\x20\x27','padStart','admin_update','ğŸ”‘\x20Password\x20untuk\x20\x27','random','addUser','admin','assign','floor','utf8','createHash','get_users','\x27\x20berhasil\x20diperbarui.','\x27\x20sudah\x20digunakan.','create','sha256','ğŸš«\x20Hanya\x20bisa\x20di\x20pakai\x20untuk\x20table\x20biasa.','select','_hasPadding','Kolom\x20\x27','table','.key','ğŸš«\x20Tidak\x20boleh\x20mengganti\x20username\x20user\x20lain.','_filePath','_decrypt','hex','default','\x27\x20untuk\x20tabel\x20\x27','push','__users__','writeFileSync','\x27\x20tidak\x20valid.','\x27\x20sudah\x20ada.','charCodeAt','.meta','ğŸš«\x20Username\x20\x27root\x27\x20tidak\x20bisa\x20diubah.','list','getUserById','processing','digest','mkdirSync','_decryptV1','getHours','_encryptV2','_writeSchema','\x27\x20berhasil\x20dibuat.','_encrypt','split','promises','_writeFile','filter','996842kPBriV','2805275YCTIoR','readFileSync','username','changePassword','created_time','2147598lQvuaK','readdirSync','log','createCipheriv','forgetPassword','field','7012584BYIcgu','warn','update_username','38jvLccJ','admin_create','login','get_user_by_id','getMonth','âœ…\x20Tabel\x20\x27','find','keys','ENOENT','40129qsciHh','_requirePermission','entries','dynamicKey','Delete\x20memerlukan\x20klausa\x20WHERE.','listTable','\x27\x20berhasil\x20dihapus.','ğŸš«\x20User\x20tidak\x20ditemukan.','695367MvhXqt','length','ğŸ§¹\x20Semua\x20data\x20dalam\x20tabel\x20\x27','final','init','_ensureUserTable','ğŸš«\x20Hanya\x20root\x20yang\x20dapat\x20mengubah\x20izin\x20pengguna.','value','now','staticKey','_encryptV1','flush','fromCharCode','from','every','join','update_permission','currentUser','getFullYear','getUsers','utf-8','user','parse'];a0_0xae44=function(){return _0x1f7679;};return a0_0xae44();}export class NaHDB{constructor(_0x22ea78,_0x2f876d=null){const _0x84286a=a0_0x4ea0;this[_0x84286a(0xbe)]=_0x22ea78,!a0_0x4cffcc['existsSync'](_0x22ea78)&&a0_0x4cffcc[_0x84286a(0x7a)](_0x22ea78,{'recursive':!![]}),this[_0x84286a(0x78)]=![],this[_0x84286a(0xb6)]=null,this['staticKey']=_0x2f876d||Buffer[_0x84286a(0xb2)](_0x84286a(0x103),_0x84286a(0xb9)),this[_0x84286a(0xae)]=a0_0x574394[_0x84286a(0x10f)](_0x84286a(0x114))[_0x84286a(0xc4)](this[_0x84286a(0xae)])[_0x84286a(0x79)](),this[_0x84286a(0xa0)]=this['_loadOrCreateDynamicKey']();}async[a0_0x3dd628(0xa9)](){const _0x237a2a=a0_0x3dd628;await this['_ensureUserTable'](),console[_0x237a2a(0x8d)]('âœ…\x20Initialization\x20complete');}['_loadOrCreateDynamicKey'](){const _0x1406fc=a0_0x3dd628,_0x4a4d8f=a0_0x42f4b6[_0x1406fc(0xb4)](this[_0x1406fc(0xbe)],_0x1406fc(0x11a));if(a0_0x4cffcc[_0x1406fc(0xef)](_0x4a4d8f)){const _0x46cd34=a0_0x4cffcc[_0x1406fc(0x87)](_0x4a4d8f);return this[_0x1406fc(0xf8)](_0x46cd34,this[_0x1406fc(0xae)]);}else{const _0x10518c=a0_0x574394[_0x1406fc(0xee)](0x20),_0x103372=this[_0x1406fc(0xf8)](_0x10518c,this[_0x1406fc(0xae)]);return a0_0x4cffcc[_0x1406fc(0x123)](_0x4a4d8f,_0x103372),_0x10518c;}}[a0_0x3dd628(0xeb)](_0x2caa25){const _0x2040d0=a0_0x3dd628,_0xfb851a=BLOCK_SIZE-_0x2caa25[_0x2040d0(0xa6)]%BLOCK_SIZE,_0x28b0af=Buffer['alloc'](_0xfb851a||BLOCK_SIZE,_0xfb851a||BLOCK_SIZE);return Buffer[_0x2040d0(0xdc)]([_0x2caa25,_0x28b0af]);}[a0_0x3dd628(0xe3)](_0x49225e){const _0x1a5ae7=a0_0x3dd628,_0x5778e9=_0x49225e[_0x49225e[_0x1a5ae7(0xa6)]-0x1];return _0x49225e[_0x1a5ae7(0xd9)](0x0,-_0x5778e9);}[a0_0x3dd628(0x117)](_0x186ad0){const _0x57b6fa=a0_0x3dd628;if(_0x186ad0[_0x57b6fa(0xa6)]===0x0)return![];const _0x4d7d2a=_0x186ad0[_0x186ad0[_0x57b6fa(0xa6)]-0x1];if(_0x4d7d2a<0x1||_0x4d7d2a>BLOCK_SIZE)return![];return _0x186ad0['slice'](-_0x4d7d2a)[_0x57b6fa(0xb3)](_0x2a683d=>_0x2a683d===_0x4d7d2a);}[a0_0x3dd628(0xc7)](_0x3871ae){const _0x35845f=a0_0x3dd628;return _0x3871ae[_0x35845f(0x81)]('')[_0x35845f(0xc6)](_0x13407b=>_0x13407b[_0x35845f(0x126)](0x0)[_0x35845f(0x104)](0x2)[_0x35845f(0x106)](0x8,'0'))['join']('');}['_binaryToString'](_0x179b57){const _0x208aa5=a0_0x3dd628;let _0x414537='';for(let _0x3613c1=0x0;_0x3613c1<_0x179b57[_0x208aa5(0xa6)];_0x3613c1+=0x8){const _0x328fd8=_0x179b57[_0x208aa5(0xd9)](_0x3613c1,_0x3613c1+0x8);_0x414537+=String[_0x208aa5(0xb1)](parseInt(_0x328fd8,0x2));}return _0x414537;}[a0_0x3dd628(0x7d)](_0x1adad7){const _0x5f0e8b=a0_0x3dd628,_0x3064dd=a0_0x574394['randomBytes'](BLOCK_SIZE),_0x428540=a0_0x574394[_0x5f0e8b(0x8e)](_0x5f0e8b(0xf2),this[_0x5f0e8b(0xa0)],_0x3064dd),_0x5abff6=this[_0x5f0e8b(0xeb)](Buffer[_0x5f0e8b(0xb2)](_0x1adad7,_0x5f0e8b(0x10e))),_0x54956f=Buffer[_0x5f0e8b(0xdc)]([_0x428540[_0x5f0e8b(0xc4)](_0x5abff6),_0x428540[_0x5f0e8b(0xa8)]()]),_0xcfb4ec=Buffer[_0x5f0e8b(0xdc)]([_0x3064dd,_0x54956f]);let _0x32f7cf=_0xcfb4ec[_0x5f0e8b(0x104)](_0x5f0e8b(0xe4))[_0x5f0e8b(0xfa)](/\+/g,'-')[_0x5f0e8b(0xfa)](/\//g,'_')['replace'](/=+$/,'');if(!_0x32f7cf['trim']())throw new Error(_0x5f0e8b(0xd6));return this[_0x5f0e8b(0xc7)](_0x32f7cf);}[a0_0x3dd628(0xd3)](_0x272717){const _0x972962=a0_0x3dd628;let _0x4b1649=this[_0x972962(0xd1)](_0x272717);_0x4b1649=_0x4b1649['replace'](/-/g,'+')[_0x972962(0xfa)](/_/g,'/');const _0xac6061=(0x4-_0x4b1649['length']%0x4)%0x4;_0x4b1649+='='['repeat'](_0xac6061);const _0x3fd0c4=Buffer[_0x972962(0xb2)](_0x4b1649,'base64');if(_0x3fd0c4[_0x972962(0xa6)]<BLOCK_SIZE*0x2)throw new Error(_0x972962(0xd7)+_0x3fd0c4[_0x972962(0xa6)]+_0x972962(0xd0));const _0x414ecd=_0x3fd0c4[_0x972962(0xd9)](0x0,BLOCK_SIZE),_0x562a77=_0x3fd0c4['slice'](BLOCK_SIZE),_0x41e90a=a0_0x574394[_0x972962(0xc0)](_0x972962(0xf2),this[_0x972962(0xa0)],_0x414ecd);let _0x2a3bcf=Buffer[_0x972962(0xdc)]([_0x41e90a['update'](_0x562a77),_0x41e90a[_0x972962(0xa8)]()]);return this[_0x972962(0x117)](_0x2a3bcf)&&(_0x2a3bcf=this[_0x972962(0xe3)](_0x2a3bcf)),_0x2a3bcf[_0x972962(0x104)](_0x972962(0x10e));}['_cleanDecrypted'](_0xa61eff){const _0x13e002=a0_0x3dd628;Buffer['isBuffer'](_0xa61eff)&&(_0xa61eff=_0xa61eff[_0x13e002(0x104)](_0x13e002(0x10e)));_0xa61eff=_0xa61eff[_0x13e002(0xfa)](/[\x00-\x1F\x7F]/g,'');const _0x1f4aa6=Array[_0x13e002(0xb2)]({'length':0x10},(_0x334846,_0x4a47f5)=>String[_0x13e002(0xb1)](_0x4a47f5+0x1))[_0x13e002(0xb4)]('');return _0xa61eff=_0xa61eff[_0x13e002(0xfa)](new RegExp('['+_0x1f4aa6+']','g'),''),_0xa61eff;}[a0_0x3dd628(0xf8)](_0x5c62bb,_0x171220){const _0x56d80b=a0_0x3dd628,_0x48e76f=Buffer['alloc'](_0x5c62bb[_0x56d80b(0xa6)]);for(let _0x5d86c2=0x0;_0x5d86c2<_0x5c62bb[_0x56d80b(0xa6)];_0x5d86c2++){_0x48e76f[_0x5d86c2]=_0x5c62bb[_0x5d86c2]^_0x171220[_0x5d86c2%_0x171220[_0x56d80b(0xa6)]];}return _0x48e76f;}[a0_0x3dd628(0xaf)](_0x2d4d50){const _0x2b044d=a0_0x3dd628,_0x3dec64=a0_0x574394[_0x2b044d(0xee)](0x10),_0x50b205=a0_0x574394['createCipheriv'](_0x2b044d(0xf2),this[_0x2b044d(0xa0)],_0x3dec64),_0x5bc0a0=this[_0x2b044d(0xeb)](Buffer[_0x2b044d(0xb2)](_0x2d4d50,_0x2b044d(0xb9))),_0x4c0334=Buffer[_0x2b044d(0xdc)]([_0x50b205[_0x2b044d(0xc4)](_0x5bc0a0),_0x50b205[_0x2b044d(0xa8)]()]);return Buffer['concat']([_0x3dec64,_0x4c0334]);}[a0_0x3dd628(0x7b)](_0x4acdce){const _0xe4a8ca=a0_0x3dd628,_0xf4a87e=_0x4acdce[_0xe4a8ca(0xd9)](0x0,0x10),_0x20ece5=_0x4acdce[_0xe4a8ca(0xd9)](0x10),_0x3ac394=a0_0x574394[_0xe4a8ca(0xc0)](_0xe4a8ca(0xf2),this[_0xe4a8ca(0xa0)],_0xf4a87e),_0xedfe09=Buffer[_0xe4a8ca(0xdc)]([_0x3ac394[_0xe4a8ca(0xc4)](_0x20ece5),_0x3ac394[_0xe4a8ca(0xa8)]()]);return this[_0xe4a8ca(0xe3)](_0xedfe09)[_0xe4a8ca(0x104)](_0xe4a8ca(0xb9));}[a0_0x3dd628(0x80)](_0x566db4){const _0x1f57e3=a0_0x3dd628;try{return this[_0x1f57e3(0x7d)](_0x566db4);}catch(_0x3c4e26){return this[_0x1f57e3(0xaf)](_0x566db4);}}[a0_0x3dd628(0x11d)](_0x1d3372){const _0x2d4ec2=a0_0x3dd628;try{return this[_0x2d4ec2(0xd3)](_0x1d3372);}catch(_0x35dc7e){return this[_0x2d4ec2(0x7b)](_0x1d3372);}}[a0_0x3dd628(0x11c)](_0x533993){const _0x5a3c45=a0_0x3dd628;return a0_0x42f4b6[_0x5a3c45(0xb4)](this[_0x5a3c45(0xbe)],_0x533993+_0x5a3c45(0xf0));}[a0_0x3dd628(0xed)](_0x31c67d){const _0x16530d=a0_0x3dd628;return a0_0x42f4b6[_0x16530d(0xb4)](this[_0x16530d(0xbe)],_0x31c67d+'.meta');}[a0_0x3dd628(0xdb)](_0x5b4836){const _0xce9147=a0_0x3dd628,_0xca48e2=this[_0xce9147(0x11c)](_0x5b4836);if(!a0_0x4cffcc[_0xce9147(0xef)](_0xca48e2))return[];const _0x675f=a0_0x4cffcc[_0xce9147(0x87)](_0xca48e2);return _0x675f[_0xce9147(0xa6)]>0x0?JSON[_0xce9147(0xbb)](this[_0xce9147(0x11d)](_0x675f)):[];}async['_writeFile'](_0x1a931a,_0x58b466){const _0x48a7b1=a0_0x3dd628,_0x1ed825=this['_filePath'](_0x1a931a),_0x46806a=this[_0x48a7b1(0x80)](JSON[_0x48a7b1(0xd8)](_0x58b466));await a0_0x4cffcc['promises'][_0x48a7b1(0xdd)](_0x1ed825,_0x46806a);}[a0_0x3dd628(0xf4)](_0xea75b0){const _0x5068b0=a0_0x3dd628,_0x5a752d=this[_0x5068b0(0xed)](_0xea75b0);if(!a0_0x4cffcc[_0x5068b0(0xef)](_0x5a752d))throw new Error(_0x5068b0(0xe7)+_0xea75b0+'\x27\x20tidak\x20ditemukan.');const _0x23badf=a0_0x4cffcc['readFileSync'](_0x5a752d),_0x10e6ba=this[_0x5068b0(0x11d)](_0x23badf);return JSON[_0x5068b0(0xbb)](_0x10e6ba);}async[a0_0x3dd628(0x7e)](_0x1fd411,_0x5e3cd8){const _0x335c44=a0_0x3dd628,_0x3de05c=this[_0x335c44(0xed)](_0x1fd411),_0x177fc3=this[_0x335c44(0x80)](JSON[_0x335c44(0xd8)](_0x5e3cd8));await a0_0x4cffcc['promises'][_0x335c44(0xdd)](_0x3de05c,_0x177fc3);}[a0_0x3dd628(0xcd)](){const _0x67ca5e=a0_0x3dd628,_0x245235=new Date(),_0x46e8aa=''+_0x245235['getFullYear']()+(_0x245235[_0x67ca5e(0x98)]()+0x1)[_0x67ca5e(0x104)]()[_0x67ca5e(0x106)](0x2,'0')+_0x245235[_0x67ca5e(0xfe)]()['toString']()[_0x67ca5e(0x106)](0x2,'0')+_0x245235['getHours']()[_0x67ca5e(0x104)]()['padStart'](0x2,'0')+_0x245235[_0x67ca5e(0xcb)]()[_0x67ca5e(0x104)]()[_0x67ca5e(0x106)](0x2,'0')+_0x245235[_0x67ca5e(0xc1)]()[_0x67ca5e(0x104)]()[_0x67ca5e(0x106)](0x2,'0'),_0x3459aa=Date[_0x67ca5e(0xad)]()[_0x67ca5e(0x104)](0x10),_0x1cc110=Math[_0x67ca5e(0x10d)](0x2710+Math[_0x67ca5e(0x109)]()*0x15f90);return _0x46e8aa+'_'+_0x3459aa+_0x1cc110;}['_timestamp'](){const _0x8ab408=a0_0x3dd628,_0x47a37b=new Date(),_0x3f81b2=_0x456b4b=>_0x456b4b[_0x8ab408(0x104)]()[_0x8ab408(0x106)](0x2,'0'),_0x59aa46=_0x47a37b['getFullYear']()+'-'+_0x3f81b2(_0x47a37b[_0x8ab408(0x98)]()+0x1)+'-'+_0x3f81b2(_0x47a37b[_0x8ab408(0xfe)]())+'\x20'+_0x3f81b2(_0x47a37b[_0x8ab408(0x7c)]())+':'+_0x3f81b2(_0x47a37b[_0x8ab408(0xcb)]())+':'+_0x3f81b2(_0x47a37b[_0x8ab408(0xc1)]());return{'created_at':_0x59aa46,'updated_at':_0x59aa46,'created_date':_0x59aa46[_0x8ab408(0x81)]('\x20')[0x0],'created_time':_0x59aa46['split']('\x20')[0x1],'admin_create':this[_0x8ab408(0xb6)]?.['id']||'','admin_update':this[_0x8ab408(0xb6)]?.['id']||''};}[a0_0x3dd628(0xbc)](_0x1902e9){const _0x11ddab=a0_0x3dd628;return a0_0x574394[_0x11ddab(0x10f)]('sha256')[_0x11ddab(0xc4)](_0x1902e9,_0x11ddab(0xb9))[_0x11ddab(0x79)](_0x11ddab(0x11e));}async[a0_0x3dd628(0xaa)](){const _0x59bc72=a0_0x3dd628,_0x569ed2={'id':{'type':_0x59bc72(0xf3),'default':''},'username':{'type':_0x59bc72(0xf3),'default':''},'password':{'type':_0x59bc72(0xf3),'default':''},'role':{'type':_0x59bc72(0xf3),'default':_0x59bc72(0xba)},'permissions':{'type':_0x59bc72(0xce),'default':{}}};!a0_0x4cffcc[_0x59bc72(0xef)](this[_0x59bc72(0xed)](_0x59bc72(0x122)))&&(await this['_writeSchema']('__users__',_0x569ed2),await this[_0x59bc72(0x83)]('__users__',[{'id':this[_0x59bc72(0xcd)](),'username':_0x59bc72(0xec),'password':this[_0x59bc72(0xbc)](''),'role':_0x59bc72(0x10b),'permissions':{},...this[_0x59bc72(0xf5)]()}]));}[a0_0x3dd628(0x9e)](_0x58c645,_0x1b863a){const _0x327956=a0_0x3dd628;if(!this[_0x327956(0xb6)])throw new Error(_0x327956(0xe0));if(this[_0x327956(0xb6)][_0x327956(0x88)]==='root')return;const _0x436fac=this['currentUser'][_0x327956(0xc3)]||{},_0x8f01d3=_0x436fac[_0x58c645]||[];if(!_0x8f01d3['includes'](_0x1b863a))throw new Error(_0x327956(0x105)+_0x1b863a+_0x327956(0x120)+_0x58c645+'\x27.');}[a0_0x3dd628(0xbd)](){const _0x10af16=a0_0x3dd628,_0x5a4a07=new Date(),_0x4128a3=_0x23c7d5=>_0x23c7d5[_0x10af16(0x104)]()['padStart'](0x2,'0');return _0x5a4a07[_0x10af16(0xb7)]()+'-'+_0x4128a3(_0x5a4a07[_0x10af16(0x98)]()+0x1)+'-'+_0x4128a3(_0x5a4a07[_0x10af16(0xfe)]())+'\x20'+_0x4128a3(_0x5a4a07[_0x10af16(0x7c)]())+':'+_0x4128a3(_0x5a4a07[_0x10af16(0xcb)]())+':'+_0x4128a3(_0x5a4a07[_0x10af16(0xc1)]());}[a0_0x3dd628(0x96)](_0x158bb3,_0x35617e){const _0x18fe52=a0_0x3dd628,_0x1581a8=this['_readFile']('__users__');for(const _0x462a4d of _0x1581a8){if(_0x462a4d[_0x18fe52(0x88)]===_0x158bb3&&_0x462a4d[_0x18fe52(0xc2)]===this['_hashPassword'](_0x35617e))return this[_0x18fe52(0xb6)]=_0x462a4d,!![];}return![];}async[a0_0x3dd628(0x8f)](_0x46ca58,_0x3a6beb){const _0x1c3b91=a0_0x3dd628;this[_0x1c3b91(0x9e)](_0x1c3b91(0x122),_0x1c3b91(0xd5));const _0x3e6de3=await this[_0x1c3b91(0xdb)]('__users__');for(const _0x1de2d9 of _0x3e6de3){if(_0x1de2d9[_0x1c3b91(0x88)]===_0x46ca58){_0x1de2d9[_0x1c3b91(0xc2)]=this[_0x1c3b91(0xbc)](_0x3a6beb),_0x1de2d9[_0x1c3b91(0xda)]=this[_0x1c3b91(0xbd)]();break;}}await this[_0x1c3b91(0x83)](_0x1c3b91(0x122),_0x3e6de3),console[_0x1c3b91(0x8d)](_0x1c3b91(0x108)+_0x46ca58+_0x1c3b91(0xe8));}async[a0_0x3dd628(0xca)](_0x1de413,_0x5d8818=null){const _0x280522=a0_0x3dd628;if(!this[_0x280522(0xb6)])throw new Error(_0x280522(0xe0));let _0x13fc50=this['currentUser']['id'];_0x5d8818&&(this['_requirePermission']('__users__',_0x280522(0x93)),_0x13fc50=_0x5d8818);const _0x376b02=this['currentUser'][_0x280522(0x88)]===_0x280522(0xec),_0x18528e=this[_0x280522(0xdb)](_0x280522(0x122)),_0x50863a=_0x18528e[_0x280522(0x9a)](_0x662a73=>_0x662a73['id']===_0x13fc50);if(!_0x50863a)throw new Error(_0x280522(0xa4));if(_0x50863a[_0x280522(0x88)]===_0x280522(0xec))throw new Error(_0x280522(0x75));if(!_0x376b02&&_0x13fc50!==this[_0x280522(0xb6)]['id'])throw new Error(_0x280522(0x11b));if(_0x1de413===_0x280522(0xec))throw new Error(_0x280522(0xd2));if(_0x18528e[_0x280522(0xf6)](_0x5dae02=>_0x5dae02[_0x280522(0x88)]===_0x1de413&&_0x5dae02['id']!==_0x13fc50))throw new Error('ğŸš«\x20Username\x20\x27'+_0x1de413+_0x280522(0x112));for(const _0x5d6841 of _0x18528e){if(_0x5d6841['id']===_0x13fc50){_0x5d6841['username']=_0x1de413,_0x5d6841[_0x280522(0xda)]=this[_0x280522(0xbd)]();break;}}await this['_writeFile'](_0x280522(0x122),_0x18528e);}async[a0_0x3dd628(0x89)](_0x37880c,_0x41a0ea=null){const _0x3b9c93=a0_0x3dd628;if(!this['currentUser'])throw new Error('ğŸ”’\x20Harus\x20login\x20terlebih\x20dahulu.');let _0x477976=this['currentUser']['id'];_0x41a0ea&&(this[_0x3b9c93(0x9e)](_0x3b9c93(0x122),'change_password'),_0x477976=_0x41a0ea);if(this['currentUser']['username']!==_0x3b9c93(0xec)&&this[_0x3b9c93(0xb6)]['id']!==_0x477976)throw new Error('ğŸš«\x20Tidak\x20bisa\x20mengubah\x20sandi\x20user\x20lain.');const _0x298fdc=this['_readFile'](_0x3b9c93(0x122));for(const _0x42dee6 of _0x298fdc){if(_0x42dee6['id']===_0x477976){_0x42dee6['password']=this[_0x3b9c93(0xbc)](_0x37880c),_0x42dee6[_0x3b9c93(0xda)]=this['_getTimestamp'](),_0x42dee6[_0x3b9c93(0x107)]=this[_0x3b9c93(0xb6)]['id'];break;}}await this[_0x3b9c93(0x83)]('__users__',_0x298fdc);}[a0_0x3dd628(0xd4)](_0xf7beb6){const _0x401188=a0_0x3dd628;this['_requirePermission'](_0x401188(0x122),_0x401188(0xe5));const _0x1a533a=this[_0x401188(0xdb)]('__users__'),_0xc158fc=_0x1a533a[_0x401188(0x9a)](_0x5cb5e4=>_0x5cb5e4['id']===_0xf7beb6);return _0xc158fc?_0xc158fc[_0x401188(0x88)]:'';}async['updatePermission'](_0x2e334d,_0x5fdd81){const _0x4ca9d0=a0_0x3dd628;this['_requirePermission']('__users__',_0x4ca9d0(0xb5));if(!this['currentUser']||this[_0x4ca9d0(0xb6)][_0x4ca9d0(0x88)]!==_0x4ca9d0(0xec))throw new Error(_0x4ca9d0(0xab));const _0x2861e2=this[_0x4ca9d0(0xdb)](_0x4ca9d0(0x122));let _0x249fb0=![];for(const _0x39ec70 of _0x2861e2){if(_0x39ec70[_0x4ca9d0(0x88)]===_0x2e334d){_0x39ec70['permissions']=_0x5fdd81,_0x39ec70[_0x4ca9d0(0xda)]=this[_0x4ca9d0(0xbd)](),_0x249fb0=!![];break;}}if(!_0x249fb0)throw new Error(_0x4ca9d0(0xcc)+_0x2e334d+'\x27\x20tidak\x20ditemukan.');await this[_0x4ca9d0(0x83)](_0x4ca9d0(0x122),_0x2861e2);}[a0_0x3dd628(0x116)](_0x4b306a,_0x48b21c=null){const _0x4ba3b2=a0_0x3dd628;this[_0x4ba3b2(0x9e)](_0x4b306a,_0x4ba3b2(0x116));if(_0x4b306a=='__users__')throw new Error(_0x4ba3b2(0x115));let _0x29b33e=this['_readFile'](_0x4b306a);_0x48b21c&&(_0x29b33e=_0x29b33e['filter'](_0x1e6df9=>Object[_0x4ba3b2(0x9f)](_0x48b21c)[_0x4ba3b2(0xb3)](([_0x2b25b7,_0x10055d])=>_0x1e6df9[_0x2b25b7]===_0x10055d)));for(const _0x147ada of _0x29b33e){_0x147ada[_0x4ba3b2(0x95)]&&(_0x147ada[_0x4ba3b2(0x95)]=this['getUsernameById'](_0x147ada[_0x4ba3b2(0x95)])),_0x147ada[_0x4ba3b2(0x107)]&&(_0x147ada[_0x4ba3b2(0x107)]=this['getUsernameById'](_0x147ada[_0x4ba3b2(0x107)]));}return _0x29b33e;}async[a0_0x3dd628(0xc8)](_0x35a2e1,_0x22d4ba){const _0x46d2af=a0_0x3dd628;this[_0x46d2af(0x9e)](_0x35a2e1,_0x46d2af(0xe2));if(_0x35a2e1==_0x46d2af(0x122))throw new Error(_0x46d2af(0x115));if(a0_0x4cffcc['existsSync'](this[_0x46d2af(0xed)](_0x35a2e1)))throw new Error(_0x46d2af(0xe9)+_0x35a2e1+_0x46d2af(0x125));await this[_0x46d2af(0x7e)](_0x35a2e1,_0x22d4ba),await this[_0x46d2af(0x83)](_0x35a2e1,[]),console[_0x46d2af(0x8d)](_0x46d2af(0x99)+_0x35a2e1+_0x46d2af(0x7f));}async[a0_0x3dd628(0xbf)](_0x1d4522){const _0x20e497=a0_0x3dd628;this[_0x20e497(0x9e)](_0x1d4522,'delete_table');if(_0x1d4522=='__users__')throw new Error('ğŸš«\x20Hanya\x20bisa\x20di\x20pakai\x20untuk\x20table\x20biasa.');try{await a0_0x4cffcc[_0x20e497(0x82)][_0x20e497(0xf9)](this[_0x20e497(0x11c)](_0x1d4522)),await a0_0x4cffcc[_0x20e497(0x82)][_0x20e497(0xf9)](this[_0x20e497(0xed)](_0x1d4522)),console[_0x20e497(0x8d)](_0x20e497(0xe6)+_0x1d4522+_0x20e497(0xa3));}catch(_0x208604){if(_0x208604['code']===_0x20e497(0x9c))console[_0x20e497(0x92)](_0x20e497(0xf7)+_0x1d4522+'\x27\x20sudah\x20tidak\x20ada.');else throw _0x208604;}}async[a0_0x3dd628(0xfd)](_0x2cecbc,_0x156b99){const _0x18c712=a0_0x3dd628;this['_requirePermission'](_0x2cecbc,_0x18c712(0xc5));if(_0x2cecbc==_0x18c712(0x122))throw new Error(_0x18c712(0x115));const _0x40f10c=this[_0x18c712(0xdb)](_0x2cecbc),_0x2f3f79=_0x40f10c[_0x18c712(0xc6)](_0x32d2a3=>{const _0x3486cb=_0x18c712,_0x53bf6b={};for(const [_0x5b6540,_0x49df52]of Object[_0x3486cb(0x9f)](_0x156b99)){_0x53bf6b[_0x5b6540]=_0x32d2a3[_0x5b6540]??_0x49df52[_0x3486cb(0x11f)]??'';}for(const _0x90b8ab of['id','created_at',_0x3486cb(0xda),'created_date',_0x3486cb(0x8a),_0x3486cb(0x95),'admin_update']){if(_0x32d2a3[_0x90b8ab])_0x53bf6b[_0x90b8ab]=_0x32d2a3[_0x90b8ab];}return _0x53bf6b;});await this[_0x18c712(0x7e)](_0x2cecbc,_0x156b99),await this[_0x18c712(0x83)](_0x2cecbc,_0x2f3f79),console[_0x18c712(0x8d)](_0x18c712(0xea)+_0x2cecbc+_0x18c712(0x111));}async[a0_0x3dd628(0x113)](_0x1d1120,_0x2d2157){const _0x14702a=a0_0x3dd628;this[_0x14702a(0x9e)](_0x1d1120,_0x14702a(0x113));if(_0x1d1120==_0x14702a(0x122))throw new Error(_0x14702a(0x115));const _0xc9bb9a=this[_0x14702a(0xf4)](_0x1d1120),_0x26362c={};for(const [_0x4c3a02,_0x237c47]of Object['entries'](_0xc9bb9a)){_0x26362c[_0x4c3a02]=_0x4c3a02 in _0x2d2157?_0x2d2157[_0x4c3a02]:_0x237c47['default']??'';}for(const _0x190a86 of Object[_0x14702a(0x9b)](_0x2d2157)){if(!(_0x190a86 in _0xc9bb9a))throw new Error(_0x14702a(0x118)+_0x190a86+_0x14702a(0xfc)+_0x1d1120+'\x27');}_0x26362c['id']=this[_0x14702a(0xcd)](),Object[_0x14702a(0x10c)](_0x26362c,this[_0x14702a(0xf5)]());const _0x30e0cd=this['_readFile'](_0x1d1120);_0x30e0cd[_0x14702a(0x121)](_0x26362c),await this[_0x14702a(0x83)](_0x1d1120,_0x30e0cd);}async[a0_0x3dd628(0xc4)](_0x56f30c,_0x3a769e,_0x5e828f){const _0x37106f=a0_0x3dd628;this['_requirePermission'](_0x56f30c,_0x37106f(0xc4));if(_0x56f30c==_0x37106f(0x122))throw new Error('ğŸš«\x20Hanya\x20bisa\x20di\x20pakai\x20untuk\x20table\x20biasa.');if(!_0x3a769e||Object[_0x37106f(0x9b)](_0x3a769e)['length']===0x0)throw new Error('Update\x20memerlukan\x20klausa\x20WHERE.');const _0x365f25=this['_readSchema'](_0x56f30c);for(const _0x2f8884 of Object['keys'](_0x5e828f)){if(!(_0x2f8884 in _0x365f25))throw new Error('Kolom\x20\x27'+_0x2f8884+_0x37106f(0x124));}const _0x412453=this[_0x37106f(0xdb)](_0x56f30c);let _0x317bbd=![];for(const _0x816831 of _0x412453){Object['entries'](_0x3a769e)[_0x37106f(0xb3)](([_0x1db105,_0x499ef6])=>_0x816831[_0x1db105]===_0x499ef6)&&(Object[_0x37106f(0x10c)](_0x816831,_0x5e828f),_0x816831[_0x37106f(0xda)]=this['_getTimestamp'](),_0x816831[_0x37106f(0x107)]=this[_0x37106f(0xb6)]?this[_0x37106f(0xb6)]['id']:'',_0x317bbd=!![]);}_0x317bbd&&await this[_0x37106f(0x83)](_0x56f30c,_0x412453);}async['delete'](_0x5206ad,_0x106f96){const _0x40a62b=a0_0x3dd628;this['_requirePermission'](_0x5206ad,_0x40a62b(0xc9));if(_0x5206ad=='__users__')throw new Error('ğŸš«\x20Hanya\x20bisa\x20di\x20pakai\x20untuk\x20table\x20biasa.');if(!_0x106f96||Object[_0x40a62b(0x9b)](_0x106f96)['length']===0x0)throw new Error(_0x40a62b(0xa1));const _0x224e67=this[_0x40a62b(0xdb)](_0x5206ad),_0x49f1f6=_0x224e67[_0x40a62b(0x84)](_0x42d307=>!Object[_0x40a62b(0x9f)](_0x106f96)[_0x40a62b(0xb3)](([_0x34a89a,_0x570344])=>_0x42d307[_0x34a89a]===_0x570344));await this[_0x40a62b(0x83)](_0x5206ad,_0x49f1f6);}async[a0_0x3dd628(0x10a)](_0x53c637,_0x47e355,_0x56c1f3=a0_0x3dd628(0xba),_0x347c00={}){const _0x3f3d8d=a0_0x3dd628;this['_requirePermission'](_0x3f3d8d(0x122),'add_user');if(!this['currentUser']||this[_0x3f3d8d(0xb6)][_0x3f3d8d(0x88)]!==_0x3f3d8d(0xec))throw new Error(_0x3f3d8d(0xde));const _0x15511c=this[_0x3f3d8d(0xdb)](_0x3f3d8d(0x122));if(_0x15511c['some'](_0x3be5e4=>_0x3be5e4[_0x3f3d8d(0x88)]===_0x53c637))throw new Error(_0x3f3d8d(0xcc)+_0x53c637+_0x3f3d8d(0x112));const _0x47a75f={'id':this[_0x3f3d8d(0xcd)](),'username':_0x53c637,'password':this[_0x3f3d8d(0xbc)](_0x47e355),'role':_0x56c1f3,'permissions':_0x347c00,...this['_timestamp']()};_0x15511c['push'](_0x47a75f),await this[_0x3f3d8d(0x83)](_0x3f3d8d(0x122),_0x15511c);}['getUserIdByUsername'](_0x33807d){const _0x400e1e=a0_0x3dd628;this['_requirePermission'](_0x400e1e(0x122),_0x400e1e(0x100));const _0x45280e=this[_0x400e1e(0xdb)](_0x400e1e(0x122));for(const _0x582984 of _0x45280e){if(_0x582984['username']===_0x33807d)return _0x582984['id'];}return'';}[a0_0x3dd628(0xa2)](){const _0x334781=a0_0x3dd628;if(!this[_0x334781(0xb6)])throw new Error(_0x334781(0xe0));const _0x419d67=[],_0x17703c=a0_0x4cffcc[_0x334781(0x8c)](this[_0x334781(0xbe)]);for(const _0xf7587a of _0x17703c){if(_0xf7587a['endsWith'](_0x334781(0x74))){const _0x924db8=_0xf7587a[_0x334781(0xd9)](0x0,-0x5);try{this['_requirePermission'](_0x924db8,_0x334781(0x76)),_0x419d67[_0x334781(0x121)](_0x924db8);}catch(_0x3a7fa3){continue;}}}return _0x419d67;}[a0_0x3dd628(0xff)](_0x59632e){const _0x3eb938=a0_0x3dd628;this[_0x3eb938(0x9e)](_0x59632e,_0x3eb938(0xcf));if(_0x59632e==_0x3eb938(0x122))throw new Error('ğŸš«\x20Hanya\x20bisa\x20di\x20pakai\x20untuk\x20table\x20biasa.');const _0x48d277=this[_0x3eb938(0xed)](_0x59632e);if(!a0_0x4cffcc[_0x3eb938(0xef)](_0x48d277))throw new Error('ğŸ“‚\x20Schema\x20untuk\x20tabel\x20\x27'+_0x59632e+'\x27\x20tidak\x20ditemukan.');const _0x10058e=a0_0x4cffcc[_0x3eb938(0x87)](_0x48d277);return JSON[_0x3eb938(0xbb)](this[_0x3eb938(0x11d)](_0x10058e));}[a0_0x3dd628(0xb8)](){const _0x2a0d7f=a0_0x3dd628;this['_requirePermission']('__users__',_0x2a0d7f(0x110));const _0x41ac56=this[_0x2a0d7f(0xdb)](_0x2a0d7f(0x122));return _0x41ac56[_0x2a0d7f(0xc6)](_0x121fc0=>({'id':_0x121fc0['id'],'username':_0x121fc0['username'],'role':_0x121fc0['role']||'user','permissions':_0x121fc0['permissions']||{}}));}async['flushTable'](_0x5c1c08){const _0x3af61f=a0_0x3dd628;this[_0x3af61f(0x9e)](_0x5c1c08,_0x3af61f(0xb0));if(_0x5c1c08==_0x3af61f(0x122))throw new Error('ğŸš«\x20Hanya\x20bisa\x20di\x20pakai\x20untuk\x20table\x20biasa.');await this[_0x3af61f(0x83)](_0x5c1c08,[]),console['log'](_0x3af61f(0xa7)+_0x5c1c08+_0x3af61f(0xe1));}[a0_0x3dd628(0x102)](){const _0x5c2567=a0_0x3dd628;return this[_0x5c2567(0xb6)]!==null;}[a0_0x3dd628(0x77)](_0x1c885c){const _0x1d5108=a0_0x3dd628;this[_0x1d5108(0x9e)](_0x1d5108(0x122),_0x1d5108(0x97));const _0x36f607=this[_0x1d5108(0xdb)]('__users__');for(const _0xefea6a of _0x36f607){if(_0xefea6a['id']===_0x1c885c)return _0xefea6a;}return{};}['join'](_0x5a78b0,_0x47eb8f,_0x1c039c){const _0x477a22=a0_0x3dd628;this[_0x477a22(0x9e)](_0x5a78b0,_0x477a22(0x116));const _0x1c5659=this[_0x477a22(0xdb)](_0x5a78b0);if(_0x5a78b0==_0x477a22(0x122))throw new Error(_0x477a22(0x115));for(const _0x5a879b of _0x1c039c){const _0x5a57e0=_0x5a879b['table'];if(_0x5a57e0=='__users__')throw new Error(_0x477a22(0x115));const _0x5817f4=_0x5a879b['on'],_0x567eda=_0x5a879b['as']||_0x5a57e0;this[_0x477a22(0x9e)](_0x5a57e0,_0x477a22(0x116));const _0x18b457=this[_0x477a22(0xdb)](_0x5a57e0),_0x211e72={};for(const _0x460bba of _0x18b457){const _0x478ffd=_0x460bba[_0x5817f4];_0x478ffd!==undefined&&_0x478ffd!==null&&(_0x211e72[_0x478ffd]=_0x460bba);}for(const _0x8c471f of _0x1c5659){const _0x1a4511=_0x8c471f[_0x47eb8f];_0x8c471f[_0x567eda]=_0x211e72[_0x1a4511]||{};}}return _0x1c5659;}[a0_0x3dd628(0xf1)](_0x500655,_0x222484=null){const _0x4e44af=a0_0x3dd628;if(!_0x500655||_0x500655[_0x4e44af(0xa6)]===0x0)return[];const _0xd3921d={},_0x17b535={},_0x843360={};for(const _0x4c4d54 of _0x500655){const _0x262acb=_0x4c4d54['table'];if(_0x262acb==_0x4e44af(0x122))throw new Error('ğŸš«\x20Hanya\x20bisa\x20di\x20pakai\x20untuk\x20table\x20biasa.');const _0x2637fe=_0x4c4d54['as']||_0x262acb;_0x17b535[_0x262acb]=_0x2637fe,this['_requirePermission'](_0x262acb,'select'),_0xd3921d[_0x262acb]=this[_0x4e44af(0xdb)](_0x262acb);if(_0x4c4d54[_0x4e44af(0x101)]){const _0x184021=_0x4c4d54['where'][_0x4e44af(0x119)];!_0x843360[_0x184021]&&(_0x843360[_0x184021]=[]),_0x843360[_0x184021][_0x4e44af(0x121)](_0x4c4d54);}}const _0x470140=new Set(_0x500655[_0x4e44af(0x84)](_0x4a012a=>_0x4a012a['where'])[_0x4e44af(0xc6)](_0x40e93d=>_0x40e93d[_0x4e44af(0x119)])),_0x3ef54f=_0x500655[_0x4e44af(0x9a)](_0x4f28c2=>!_0x470140['has'](_0x4f28c2['table']))['table'];_0x222484&&_0x222484[_0x4e44af(0x119)]===_0x3ef54f&&(_0xd3921d[_0x3ef54f]=_0xd3921d[_0x3ef54f][_0x4e44af(0x84)](_0x318b5f=>String(_0x318b5f[_0x222484[_0x4e44af(0x90)]])===String(_0x222484[_0x4e44af(0xac)])));const _0x5ebda7=(_0x38d5c0,_0x10fa0a)=>{return _0x10fa0a['map'](_0x103616=>{const _0xfc48c5=a0_0x4ea0,_0xc4c884={..._0x103616};if(_0x843360[_0x38d5c0])for(const _0x4b5c6f of _0x843360[_0x38d5c0]){const _0x48acde=_0x4b5c6f[_0xfc48c5(0x119)],_0x3ea3ac=_0x4b5c6f['on'],_0x127952=_0x4b5c6f[_0xfc48c5(0x101)]['on'],_0x3273ce=_0x4b5c6f['as']||_0x48acde,_0x2f906e=_0xd3921d[_0x48acde]['find'](_0x40f902=>_0x40f902[_0x3ea3ac]===_0x103616[_0x127952]);_0xc4c884[_0x3273ce]=_0x2f906e?_0x5ebda7(_0x48acde,[_0x2f906e])[0x0]:{};}return _0xc4c884;});};return _0x5ebda7(_0x3ef54f,_0xd3921d[_0x3ef54f]);}}